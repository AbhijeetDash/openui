const __vite__fileDeps=["assets/CodeEditor-kIkMkDfR.js","assets/index-Bzrd-vT-.js","assets/vendor-QOAI5TVB.js","assets/index-BXxeEsn8.css","assets/SyntaxHighlighter-BqGbYrNU.js","assets/index-wMtx-it1.js","assets/textarea-Cy6K4ESE.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{H as Ht,r as C,j as d,I as In,J as En,u as Nn,K as vn}from"./vendor-QOAI5TVB.js";import{c as Tn,u as Te,h as Oe,I as Ln,i as An,v as Mn,S as Fn,j as Pn,k as _n,l as On,m as pt,t as le,D as Dn,b as Bn,J as Rn,e as Hn,K as Vn,L as $n,M as qn,f as Un,N as Wn,O as Qn,Q as Vt,U as Zn,V as Yn,W as $t,X as qt,Y as Gn,Z as Ut,_ as Wt,a0 as Qt,a1 as Jn,o as Kn,a2 as ot,a as Xn,B as Se,a3 as Zt,a4 as Yt,a5 as er,a6 as tr,a7 as nr,a8 as rr,a9 as ir,aa as sr,ab as ar,T as or,ac as lr,ad as ur,g as cr,x as hr,z as dr,y as fr}from"./textarea-Cy6K4ESE.js";import{T as Ce,a as Ie,b as Ee,d as mr,_ as lt,c as ke,e as pr,u as gr,M as xr}from"./index-Bzrd-vT-.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Tn("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);function Gt(e,t){if(typeof document>"u")return;const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style={position:"absolute",left:"-9999px"},document.body.appendChild(n);const r=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;n.select();let i=!1;try{i=!!document.execCommand("copy")}catch{i=!1}document.body.removeChild(n),r&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r))}function kr(){const t=Ht().id??"new",n=Te(Oe({id:t})),[r,i]=C.useState(!1),[s,a]=C.useState();return C.useEffect(()=>{r&&Ln(t,n).then(()=>{Gt(document.location.href.replace("/ai","/ai/shared"))}).catch(o=>{console.error("Share error",o),a(o.toString())})},[t,n,r]),d.jsxs(An,{onOpenChange:o=>i(o),children:[d.jsx(Mn,{asChild:!0,children:d.jsx("button",{type:"button","aria-label":"Share",className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:d.jsx(Fn,{})})}),d.jsxs(Pn,{className:"sm:max-w-[425px]",children:[d.jsxs(_n,{children:[d.jsx(On,{children:"Share"}),s?d.jsx(pt,{className:"mb-2 text-red-500 dark:text-red-400",children:s}):d.jsx(pt,{children:"Copy the link below to share your creation"})]}),d.jsx("div",{className:"items-center",children:d.jsx("input",{type:"text",value:document.location.href.replace("/ai","/ai/shared"),className:"w-full p-3"})})]})]})}function Ve({mode:e="html",error:t,isLoading:n=!1}){const r=n?"animate-pulse":"";return t?d.jsx("div",{className:"mx-auto mt-10 max-w-[80%]",children:d.jsx("div",{className:"bg-secondary text-black dark:text-white",children:d.jsxs("div",{role:"alert",className:"relative mb-2 rounded border-l-4 border-red-500 p-4",children:[d.jsx("strong",{className:"font-bold",children:"Error! "}),d.jsx("span",{className:"block sm:inline",children:t})]})})}):d.jsxs("div",{className:"mx-auto max-w-lg",children:[" ",d.jsxs("div",{role:"status",className:`my-7 ${r}`,children:[" ",d.jsx("div",{className:"mb-4 h-2.5 w-48 rounded-full bg-zinc-300 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),e==="html"&&d.jsxs("div",{role:"status",className:`mb-7 max-w-lg ${r}`,children:[" ",d.jsxs("div",{className:"flex h-48 w-full items-center justify-center rounded bg-zinc-300 dark:bg-zinc-700",children:[" ",d.jsx("svg",{className:"h-12 w-12 text-gray-200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 640 512",children:d.jsx("path",{d:"M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"})})," "]}),d.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),d.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),d.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),d.jsxs("div",{role:"status",className:`mb-6 mt-7 ${r}`,children:[" ",d.jsx("div",{className:"mb-4 h-2.5 w-48 rounded-full bg-zinc-300 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),d.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",d.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),d.jsx("span",{className:"sr-only",children:"Loading..."})," "]})]})}Ve.defaultProps={error:void 0,mode:"html"};const wr=C.lazy(async()=>lt(()=>import("./CodeEditor-kIkMkDfR.js"),__vite__mapDeps([0,1,2,3])));function yr(e,t){const n=new RegExp(Object.keys(t).join("|"),"g");return e.replace(n,r=>t[r.toLowerCase()])}function Sr(e){return`export default function Widget() {
    return (
${yr(e,{"class=":"className=","for=":"htmlFor=","-rule":"Rule","stroke-l":"strokeL","stroke-w":"strokeW","<!--":"{/*","-->":"*/}",tabindex:"tabIndex",colspan:"colSpan:",rowspan:"rowSpan:","aria-*":"aria-*","data-*":"data-*",onclick:"onClick",onchange:"onChange",onblur:"onBlur"}).split(`
`).map(r=>`        ${r}`).join(`
`)}
    )
}`}function jr({id:e,code:t,isShared:n}){const r=Te(Oe({id:e})),[i,s]=le(Qn),[a,o]=le(Vt),[p,l]=C.useState(t);C.useEffect(()=>{var f;l(i==="jsx"?Sr(t):i==="html"?t:((f=r.components)==null?void 0:f[i])??"Loading...")},[i,t,r.components]),C.useEffect(()=>{a&&s(a)},[a,s]);const u=["html"];return r.components?u.push(...Object.keys(r.components)):u.push("jsx"),d.jsx("div",{className:"code-syntax-wrapper",children:d.jsxs("div",{className:"code-syntax relative border",children:[d.jsxs("div",{className:"grid w-full grid-cols-2 rounded-t-md border-b",children:[d.jsxs("ul",{className:"flex text-center text-sm font-medium text-gray-500 dark:text-gray-400",children:[u.map(f=>d.jsx("li",{children:d.jsx("button",{type:"button",onClick:()=>s(f),className:`inline-block w-full border-r p-2 px-3 text-secondary-foreground ${f===i?"bg-background":"bg-secondary hover:bg-background"}`,children:f.toUpperCase()})},f)),d.jsx("li",{children:d.jsxs(Dn,{children:[d.jsx(Bn,{asChild:!0,children:d.jsx("button",{type:"button","aria-label":"Convert HTML to a framework",className:"inline-block w-full border-r bg-secondary p-[10px] text-secondary-foreground hover:bg-background",children:d.jsxs(Ce,{children:[d.jsx(Ie,{asChild:!0,children:d.jsx(Rn,{})}),d.jsx(Ee,{side:"bottom",children:"Convert HTML to a framework"})]})})}),d.jsxs(Hn,{side:"top",children:[d.jsx(Vn,{children:"Convert to"}),d.jsx($n,{}),qn.map(f=>d.jsx(Un,{onClick:()=>{o(f)},children:f.toLocaleUpperCase()},f))]})]})},"new")]}),d.jsxs("div",{className:"flex justify-end",children:[e!=="new"&&!n&&d.jsx(kr,{}),d.jsx("button",{type:"button","aria-label":"Download",onClick:()=>{const f=i==="html"?".html":".js";mr(t,i==="html"?"text/html":"application/javascript",`${r.name}${f}`)},className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:d.jsx(Wn,{})}),d.jsxs("button",{type:"button",onClick:()=>Gt(p),className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:[d.jsxs("svg",{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 20",children:[d.jsx("path",{d:"M5 9V4.13a2.96 2.96 0 0 0-1.293.749L.879 7.707A2.96 2.96 0 0 0 .13 9H5Zm11.066-9H9.829a2.98 2.98 0 0 0-2.122.879L7 1.584A.987.987 0 0 0 6.766 2h4.3A3.972 3.972 0 0 1 15 6v10h1.066A1.97 1.97 0 0 0 18 14V2a1.97 1.97 0 0 0-1.934-2Z"}),d.jsx("path",{d:"M11.066 4H7v5a2 2 0 0 1-2 2H0v7a1.969 1.969 0 0 0 1.933 2h9.133A1.97 1.97 0 0 0 13 18V6a1.97 1.97 0 0 0-1.934-2Z"})]})," ",d.jsx("span",{className:"copy-text",children:"Copy"})]})]})]}),d.jsx("div",{className:"relative bg-zinc-50 dark:bg-zinc-900",children:d.jsx("div",{className:"max-h-[24vh] overflow-scroll pb-8 text-sm",tabIndex:-1,children:d.jsx(C.Suspense,{fallback:d.jsx(Ve,{isLoading:!0}),children:t?d.jsx(wr,{code:p,framework:i}):void 0})})})]})})}function Jt({className:e,style:t,callback:n}){const r=["Create a responsive navigation bar with dropdown menus, using a dark theme.","I need a user profile card with an avatar, name, and social media links in Tailwind CSS.","Generate a modal popup for user feedback, including text area and submit button.","Can you make a pricing table with three tiers, highlighting the best value tier?","Build a responsive image gallery grid that supports lightbox viewing.","I'm looking for a login form with email and password fields, plus a remember me checkbox.","Design a newsletter signup section with an input field and a subscribe button, featuring a minimalist aesthetic.","Create a footer with columns for links, a brief about section, and social media icons.","Generate a dashboard layout with a sidebar navigation, header, and content area.","I need an accordion FAQ section where questions expand to show answers on click.","Produce a blog post template with a featured image, title, date, author, and content area.","Design a to-do list app interface with tasks, checkboxes, and an add task form.","Create a progress bar component that shows percentage completion and can be styled dynamically.","Generate a contact form with name, email, message fields, and a send button, with validation styles.","Design a carousel slider for featured articles with previous and next controls, using a sleek, modern look.","Create a set of social share buttons with icons for Facebook, Twitter, LinkedIn, and Instagram, with a hover effect.","Generate a responsive table with sortable columns, row highlight on hover, and pagination.","I need a card layout for product listings, including an image, title, price, and 'Add to Cart' button.","Build a timeline component for displaying a project's milestones, with vertical lines and circular markers.","Design a weather widget showing the current temperature, weather condition icons, and a 5-day forecast.","Create an alert component with success, warning, and error variations that can be dismissed.","Generate a multi-step form for a checkout process, including progress indicators.","I'm looking for a tab component with horizontal navigation and dynamically loaded content.","Design a search bar with autocomplete suggestions that appear as the user types.","Create a sticky header that becomes visible when scrolling up and hides on scrolling down.","Generate a set of animated loading spinners with different styles for asynchronous data loading.","I need a grid of cards for team members, including photo, name, role, and a short bio, with a flip effect on hover.","Build a testimonial slider with quotes from customers, including their names and photos.","Design a date picker component that integrates with a form and supports range selection.","Generate a set of badges for different status levels like New, In Progress, and Completed, with customizable colors."],[i,s]=C.useState([]);return C.useEffect(()=>{const a=new Set;for(;a.size<3;)a.add(Math.floor(Math.random()*r.length));s([...a])},[r.length]),d.jsxs("div",{className:ke(e,"flex flex-wrap items-center justify-center gap-2 transition-all duration-500"),style:t,children:[d.jsx("button",{onClick:()=>n(r[i[0]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-teal-400 to-blue-500 px-4 py-2 text-white transition-all hover:from-teal-500 hover:to-blue-600",children:d.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[0]]})}),d.jsx("button",{onClick:()=>n(r[i[1]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-purple-400 to-pink-500 px-4 py-2 text-white transition-all hover:from-purple-500 hover:to-pink-600",children:d.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[1]]})}),d.jsx("button",{onClick:()=>n(r[i[2]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 px-4 py-2 text-white transition-all hover:from-yellow-500 hover:to-orange-600",children:d.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[2]]})})]})}Jt.defaultProps={className:"",style:{}};const zr=Zn,Cr=Yn,Ir=Jn,Kt=C.forwardRef(({className:e,...t},n)=>d.jsx($t,{className:ke("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Kt.displayName=$t.displayName;const Er=Kn("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Xt=C.forwardRef(({side:e="right",className:t,children:n,...r},i)=>d.jsxs(Ir,{children:[d.jsx(Kt,{}),d.jsxs(qt,{ref:i,className:ke(Er({side:e}),t),...r,children:[n,d.jsxs(Gn,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[d.jsx(Ut,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xt.displayName=qt.displayName;const en=({className:e,...t})=>d.jsx("div",{className:ke("flex flex-col space-y-2 text-center sm:text-left",e),...t});en.displayName="SheetHeader";const tn=C.forwardRef(({className:e,...t},n)=>d.jsx(Wt,{ref:n,className:ke("text-lg font-semibold text-foreground",e),...t}));tn.displayName=Wt.displayName;const nn=C.forwardRef(({className:e,...t},n)=>d.jsx(Qt,{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));nn.displayName=Qt.displayName;function Nr({onDropFile:e,onClick:t}){const[n,r]=C.useState(!1);return d.jsx("div",{className:"flex h-full items-center bg-background",onKeyUp:i=>{i.key==="Enter"&&t()},role:"button",tabIndex:0,onClick:t,onDragEnter:()=>r(!0),onDragExit:()=>r(!1),onDrop:i=>{i.preventDefault(),r(!1);let s;if(i.dataTransfer.items.length>0){for(const a of i.dataTransfer.items)if(a.kind==="file"){if(s=a.getAsFile(),s!=null&&s.type.startsWith("image/"))break;s=void 0}}else for(const a of i.dataTransfer.files){if(a.type.startsWith("image/"))break;s=void 0}i.dataTransfer.clearData(),s?(console.log("Got file type",s.type),e(s)):alert("Only images are supported")},onDragOver:i=>{i.preventDefault()},children:d.jsxs("label",{htmlFor:"file-input",className:"relative mx-auto h-64 w-64 cursor-pointer rounded-lg bg-white p-4 text-center text-zinc-600 shadow-lg dark:bg-zinc-800",children:[d.jsx("div",{className:"center mb-5",children:d.jsx("img",{src:"/android-chrome-192x192.png",className:"inline-block w-24",alt:"OpenUI"})}),d.jsx("span",{className:"text-lg",children:"Drag a screenshot of UI or click me to upload one."}),d.jsx("div",{className:"mt-2 text-sm",children:"You can also just explain what you want in the text box below."}),d.jsx("div",{className:ke("absolute inset-0 h-full w-full rounded-lg border-2 border-dashed border-zinc-400 bg-transparent",n&&"border-zinc-100")})]})})}function vr(){const[e,t]=le(ot);return d.jsx("div",{className:"flex h-full items-center bg-background",children:d.jsxs("div",{className:"relative mx-auto",children:[d.jsx(Ut,{onClick:()=>t(""),className:"absolute right-1 top-1 cursor-pointer text-zinc-600 dark:text-zinc-400"}),d.jsx("img",{alt:"Screenshot",className:"mx-auto h-64  w-64 rounded-lg  object-contain text-center text-zinc-600 shadow-lg dark:bg-zinc-800",src:e})]})})}const Tr=C.lazy(async()=>lt(()=>import("./SyntaxHighlighter-BqGbYrNU.js"),__vite__mapDeps([4,2,1,3]))),Lr=C.lazy(async()=>lt(()=>import("./index-wMtx-it1.js"),__vite__mapDeps([5,2,6,1,3])));function Ar(e){const t="    ";let n="",r="";for(const i of e.split(/>\s*</))/^\/\w/.test(i)&&(r=r.slice(t.length)),n+=`${r}<${i}>
`,/^<?\w[^>]*[^/]$/.test(i)&&!i.startsWith("input")&&(r+=t);return n.slice(1,-2)}function Mr(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}function Fr(e){const n=(e.markdown??"").split(`---

`);n[0].includes("name: ")&&n.shift();let{prompt:r}=e;return n.map(i=>{const s=i.replace(/---\nprompt:.+\n/m,""),a=`### ${r}

`,o=i.split(`---
`);return(o[1]||"").startsWith("prompt:")&&(r=o[1].replace("prompt:","").trim()),i.startsWith("<")?`${a}\`\`\`html
${s}
\`\`\``:a+s}).join(`
`)}function rn({html:e,error:t,js:n,id:r,isRendering:i,imageUploadRef:s}){const a=document.location.hostname.includes("127.0.0.1")?"http://127.0.0.1:7878":"https://wandb.github.io",o=C.useRef(null),p=Te(Oe({id:r})),l=Xn(Zt),[u,f]=le(ot),[g,m]=le(Yt),[I,F]=le(er),[B,k]=C.useState(!1),[$,j]=C.useState(!1),[M,H]=C.useState(),[b,_]=C.useState("desktop");return C.useLayoutEffect(()=>{F(window.matchMedia("(prefers-color-scheme: dark)").matches)},[F]),C.useEffect(()=>{I?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[I]),C.useEffect(()=>{var v;M||k(!1),o.current&&((v=o.current.contentWindow)==null||v.postMessage({html:M,js:i?[]:n,darkMode:I,action:"hydrate"},"*"))},[M,I,n,i,o]),C.useEffect(()=>{var v,z;if(o.current){let L=e.split(`
`);const y=80,S=3,P=-1;if((v=L.at(P))!=null&&v.startsWith("<!--")){const V=L.pop();L=[...L,...Mr(V??"",y)]}else(z=L.at(P))!=null&&z.endsWith(">")||L.pop();(L.length>S||!i)&&H(L.join(`
`))}},[e,i]),C.useEffect(()=>{const v=z=>{var L,y;z.origin===a&&(z.data.action==="ready"?M&&((y=(L=o.current)==null?void 0:L.contentWindow)==null||y.postMessage({html:M,js:n,darkMode:I,action:"hydrate"},"*")):z.data.screenshot?console.log("Got screenshot event, ignoring for now",z):z.data.comment?(m([...g,z.data.comment]),l(Ar(z.data.html.trim())),j(!1)):z.data.action==="loaded"&&k(z.data.preview))};return window.addEventListener("message",v),()=>window.removeEventListener("message",v)},[M,g,n,I,l,m,a]),d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-full rounded-t-xl border bg-background p-4",children:d.jsxs("div",{className:"grid grid-cols-3",children:[d.jsx("div",{className:"col-span-2 items-center justify-center space-x-2 sm:col-span-1",children:d.jsxs(Ce,{children:[d.jsx(Ie,{asChild:!0,children:d.jsx(Se,{onClick:()=>{var v,z;j(!$),(z=(v=o.current)==null?void 0:v.contentWindow)==null||z.postMessage({html:M,action:"toggle-inspector"},"*")},size:"icon",variant:"outline",className:`${$&&"bg-secondary"}`,children:d.jsx("svg",{className:"inline-block h-4 w-4",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 2V0H7V2H5.5ZM0.96967 2.03033L2.46967 3.53033L3.53033 2.46967L2.03033 0.96967L0.96967 2.03033ZM4.24592 4.24592L4.79515 5.75631L7.79516 14.0063L8.46663 15.8529L9.19636 14.0285L10.2739 11.3346L13.4697 14.5303L14.5303 13.4697L11.3346 10.2739L14.0285 9.19636L15.8529 8.46663L14.0063 7.79516L5.75631 4.79516L4.24592 4.24592ZM11.6471 8.53337L10.1194 9.14447C9.6747 9.32235 9.32235 9.6747 9.14447 10.1194L8.53337 11.6471L6.75408 6.75408L11.6471 8.53337ZM0 7H2V5.5H0V7Z",fill:"currentColor"})})})}),d.jsx(Ee,{children:"Comment on elements in the HTML"})]})}),d.jsxs("div",{className:"col-span-1 hidden items-center justify-center space-x-2 sm:flex",children:[d.jsxs(Ce,{children:[d.jsx(Ie,{asChild:!0,children:d.jsxs(Se,{onClick:()=>_("desktop"),size:"icon",variant:"outline",children:[d.jsx("span",{className:"sr-only",children:"Toggle desktop view"}),d.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14v4m-4 1h8M1 10h18M2 1h16a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),d.jsx(Ee,{children:"Toggle desktop view"})]}),d.jsxs(Ce,{children:[d.jsx(Ie,{asChild:!0,children:d.jsxs(Se,{onClick:()=>_("tablet"),variant:"outline",size:"icon",children:[d.jsx("span",{className:"sr-only",children:"Toggle tablet view"}),d.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 20",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7.5 16.5h3M2 1h14a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),d.jsx(Ee,{children:"Toggle tablet view"})]}),d.jsxs(Ce,{children:[d.jsx(Ie,{asChild:!0,children:d.jsxs(Se,{onClick:()=>_("mobile"),variant:"outline",size:"icon",children:[d.jsx("span",{className:"sr-only",children:"Toggle mobile view"}),d.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 20",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 14h12M1 4h12M6.5 16.5h1M2 1h10a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),d.jsx(Ee,{children:"Toggle mobile view"})]})]}),d.jsxs("div",{className:"col-span-1 flex justify-end",children:[d.jsxs(Ce,{children:[d.jsx(Ie,{asChild:!0,children:d.jsxs(Se,{onClick:()=>{var v;o.current&&(F(!I),(v=o.current.contentWindow)==null||v.postMessage({action:"toggle-dark-mode"},"*"))},variant:"outline",size:"icon",children:[d.jsx("svg",{"data-toggle-icon":"moon",className:`${!I&&"hidden"} inline-block h-3.5 w-3.5`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 20",children:d.jsx("path",{d:"M17.8 13.75a1 1 0 0 0-.859-.5A7.488 7.488 0 0 1 10.52 2a1 1 0 0 0 0-.969A1.035 1.035 0 0 0 9.687.5h-.113a9.5 9.5 0 1 0 8.222 14.247 1 1 0 0 0 .004-.997Z"})}),d.jsx("svg",{"data-toggle-icon":"sun",className:`${I&&"hidden"} inline-block h-3.5 w-3.5`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M10 15a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm0-11a1 1 0 0 0 1-1V1a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1Zm0 12a1 1 0 0 0-1 1v2a1 1 0 1 0 2 0v-2a1 1 0 0 0-1-1ZM4.343 5.757a1 1 0 0 0 1.414-1.414L4.343 2.929a1 1 0 0 0-1.414 1.414l1.414 1.414Zm11.314 8.486a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM4 10a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1Zm15-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 0-2ZM4.343 14.243l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414a1 1 0 0 0-1.414-1.414ZM14.95 6.05a1 1 0 0 0 .707-.293l1.414-1.414a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 .707 1.707Z"})}),d.jsx("span",{className:"sr-only",children:"Toggle dark/light mode"})]})}),d.jsx(Ee,{children:"Toggle dark/light mode"})]}),d.jsxs(zr,{children:[d.jsxs(Ce,{children:[d.jsx(Ie,{asChild:!0,children:d.jsx(Cr,{asChild:!0,children:d.jsx(Se,{className:"ml-2",variant:"outline",size:"icon",children:d.jsx(br,{strokeWidth:1})})})}),d.jsx(Ee,{children:"View chat history"})]}),d.jsx(Xt,{className:"w-[100%] overflow-scroll sm:max-lg:max-w-[75%] md:max-w-[50%]",children:d.jsxs(en,{children:[d.jsx(tn,{children:"Chat history"}),d.jsx(nn,{asChild:!0,children:d.jsx(C.Suspense,{fallback:d.jsx(Ve,{isLoading:!0}),children:d.jsx(Lr,{className:"prose prose-sm prose-zinc max-w-full dark:prose-invert",components:{code(v){const{children:z,className:L,node:y,ref:S,...P}=v,V=/language-(\w+)/.exec(L??"");return V?d.jsx(Tr,{className:"max-h-[300px] overflow-scroll text-xs",language:V[1],...P,children:String(z).replace(/\n$/,"")}):d.jsx("code",{children:z})}},children:Fr(p)})})})]})})]})]})]})}),d.jsx("div",{className:"code-preview-wrapper",children:d.jsx("div",{className:"code-preview flex border-x bg-background bg-gradient-to-r p-0",children:d.jsxs("div",{className:"code-responsive-wrapper h-[60vh] w-full overflow-auto",children:[d.jsx("iframe",{title:"HTML preview",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-modals",ref:o,className:`iframe-code mx-auto max-h-[60vh] w-full bg-background ${b==="tablet"&&"max-w-lg"} ${b==="mobile"&&"max-w-sm"}`,style:{height:B&&!t?"100%":0},src:`${a}/openui/index.html?buster=113`}),!B&&(i||t?d.jsx(Ve,{isLoading:!0,error:t}):u?d.jsx(vr,{}):d.jsx(Nr,{onClick:()=>{var v;return(v=s==null?void 0:s.current)==null?void 0:v.click()},onDropFile:v=>{const z=new FileReader;z.addEventListener("load",()=>f(z.result)),z.readAsDataURL(v)}}))]})})})]})}rn.defaultProps={error:void 0,imageUploadRef:void 0,isRendering:!1,js:[]};const Pr={};function _r(e,t){const n=Pr,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sn(e,r,i)}function sn(e,t,n){if(Or(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return gt(e.children,t,n)}return Array.isArray(e)?gt(e,t,n):""}function gt(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=sn(e[i],t,n);return r.join("")}function Or(e){return!!(e&&typeof e=="object")}const xt=document.createElement("i");function ut(e){const t="&"+e+";";xt.innerHTML=t;const n=xt.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function we(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function ue(e,t){return e.length>0?(we(e,e.length,0,t),e):t}const bt={}.hasOwnProperty;function Dr(e){const t={};let n=-1;for(;++n<e.length;)Br(t,e[n]);return t}function Br(e,t){let n;for(n in t){const i=(bt.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){bt.call(i,a)||(i[a]=[]);const o=s[a];Rr(i[a],Array.isArray(o)?o:o?[o]:[])}}}function Rr(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);we(e,0,0,r)}function an(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Le(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const pe=je(/[A-Za-z]/),de=je(/[\dA-Za-z]/),Hr=je(/[#-'*+\--9=?A-Z^-~]/);function tt(e){return e!==null&&(e<32||e===127)}const nt=je(/\d/),Vr=je(/[\dA-Fa-f]/),$r=je(/[!-/:-@[-`{-~]/);function N(e){return e!==null&&e<-2}function ne(e){return e!==null&&(e<0||e===32)}function R(e){return e===-2||e===-1||e===32}const qr=je(new RegExp("\\p{P}|\\p{S}","u")),Ur=je(/\s/);function je(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function W(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(p){return R(p)?(e.enter(n),o(p)):t(p)}function o(p){return R(p)&&s++<i?(e.consume(p),o):(e.exit(n),t(p))}}const Wr={tokenize:Qr};function Qr(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),W(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const p=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=p),n=p,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return N(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const Zr={tokenize:Yr},kt={tokenize:Gr};function Yr(e){const t=this,n=[];let r=0,i,s,a;return o;function o(j){if(r<n.length){const M=n[r];return t.containerState=M[1],e.attempt(M[0].continuation,p,l)(j)}return l(j)}function p(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&$();const M=t.events.length;let H=M,b;for(;H--;)if(t.events[H][0]==="exit"&&t.events[H][1].type==="chunkFlow"){b=t.events[H][1].end;break}k(r);let _=M;for(;_<t.events.length;)t.events[_][1].end=Object.assign({},b),_++;return we(t.events,H+1,0,t.events.slice(M)),t.events.length=_,l(j)}return o(j)}function l(j){if(r===n.length){if(!i)return g(j);if(i.currentConstruct&&i.currentConstruct.concrete)return I(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(kt,u,f)(j)}function u(j){return i&&$(),k(r),g(j)}function f(j){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,I(j)}function g(j){return t.containerState={},e.attempt(kt,m,I)(j)}function m(j){return r++,n.push([t.currentConstruct,t.containerState]),g(j)}function I(j){if(j===null){i&&$(),k(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),F(j)}function F(j){if(j===null){B(e.exit("chunkFlow"),!0),k(0),e.consume(j);return}return N(j)?(e.consume(j),B(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(j),F)}function B(j,M){const H=t.sliceStream(j);if(M&&H.push(null),j.previous=s,s&&(s.next=j),s=j,i.defineSkip(j.start),i.write(H),t.parser.lazy[j.start.line]){let b=i.events.length;for(;b--;)if(i.events[b][1].start.offset<a&&(!i.events[b][1].end||i.events[b][1].end.offset>a))return;const _=t.events.length;let v=_,z,L;for(;v--;)if(t.events[v][0]==="exit"&&t.events[v][1].type==="chunkFlow"){if(z){L=t.events[v][1].end;break}z=!0}for(k(r),b=_;b<t.events.length;)t.events[b][1].end=Object.assign({},L),b++;we(t.events,v+1,0,t.events.slice(_)),t.events.length=b}}function k(j){let M=n.length;for(;M-- >j;){const H=n[M];t.containerState=H[1],H[0].exit.call(t,e)}n.length=j}function $(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Gr(e,t,n){return W(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function wt(e){if(e===null||ne(e)||Ur(e))return 1;if(qr(e))return 2}function ct(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const rt={name:"attention",tokenize:Kr,resolveAll:Jr};function Jr(e,t){let n=-1,r,i,s,a,o,p,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;p=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),g=Object.assign({},e[n][1].start);yt(f,-p),yt(g,p),a={type:p>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},o={type:p>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:g},s={type:p>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:p>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[r][1].end=Object.assign({},a.start),e[n][1].start=Object.assign({},o.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=ue(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=ue(l,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=ue(l,ct(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=ue(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=ue(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,we(e,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Kr(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=wt(r);let s;return a;function a(p){return s=p,e.enter("attentionSequence"),o(p)}function o(p){if(p===s)return e.consume(p),o;const l=e.exit("attentionSequence"),u=wt(p),f=!u||u===2&&i||n.includes(p),g=!i||i===2&&u||n.includes(r);return l._open=!!(s===42?f:f&&(i||!g)),l._close=!!(s===42?g:g&&(u||!f)),t(p)}}function yt(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Xr={name:"autolink",tokenize:ei};function ei(e,t,n){let r=0;return i;function i(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return pe(m)?(e.consume(m),a):m===64?n(m):l(m)}function a(m){return m===43||m===45||m===46||de(m)?(r=1,o(m)):l(m)}function o(m){return m===58?(e.consume(m),r=0,p):(m===43||m===45||m===46||de(m))&&r++<32?(e.consume(m),o):(r=0,l(m))}function p(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||tt(m)?n(m):(e.consume(m),p)}function l(m){return m===64?(e.consume(m),u):Hr(m)?(e.consume(m),l):n(m)}function u(m){return de(m)?f(m):n(m)}function f(m){return m===46?(e.consume(m),r=0,u):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):g(m)}function g(m){if((m===45||de(m))&&r++<63){const I=m===45?g:f;return e.consume(m),I}return n(m)}}const $e={tokenize:ti,partial:!0};function ti(e,t,n){return r;function r(s){return R(s)?W(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||N(s)?t(s):n(s)}}const on={name:"blockQuote",tokenize:ni,continuation:{tokenize:ri},exit:ii};function ni(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return R(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function ri(e,t,n){const r=this;return i;function i(a){return R(a)?W(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(on,t,n)(a)}}function ii(e){e.exit("blockQuote")}const ln={name:"characterEscape",tokenize:si};function si(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return $r(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const un={name:"characterReference",tokenize:ai};function ai(e,t,n){const r=this;let i=0,s,a;return o;function o(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),p}function p(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=de,u(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=Vr,u):(e.enter("characterReferenceValue"),s=7,a=nt,u(f))}function u(f){if(f===59&&i){const g=e.exit("characterReferenceValue");return a===de&&!ut(r.sliceSerialize(g))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(f)&&i++<s?(e.consume(f),u):n(f)}}const St={tokenize:li,partial:!0},jt={name:"codeFenced",tokenize:oi,concrete:!0};function oi(e,t,n){const r=this,i={tokenize:H,partial:!0};let s=0,a=0,o;return p;function p(b){return l(b)}function l(b){const _=r.events[r.events.length-1];return s=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,o=b,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(b)}function u(b){return b===o?(a++,e.consume(b),u):a<3?n(b):(e.exit("codeFencedFenceSequence"),R(b)?W(e,f,"whitespace")(b):f(b))}function f(b){return b===null||N(b)?(e.exit("codeFencedFence"),r.interrupt?t(b):e.check(St,F,M)(b)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||N(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(b)):R(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),W(e,m,"whitespace")(b)):b===96&&b===o?n(b):(e.consume(b),g)}function m(b){return b===null||N(b)?f(b):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),I(b))}function I(b){return b===null||N(b)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(b)):b===96&&b===o?n(b):(e.consume(b),I)}function F(b){return e.attempt(i,M,B)(b)}function B(b){return e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),k}function k(b){return s>0&&R(b)?W(e,$,"linePrefix",s+1)(b):$(b)}function $(b){return b===null||N(b)?e.check(St,F,M)(b):(e.enter("codeFlowValue"),j(b))}function j(b){return b===null||N(b)?(e.exit("codeFlowValue"),$(b)):(e.consume(b),j)}function M(b){return e.exit("codeFenced"),t(b)}function H(b,_,v){let z=0;return L;function L(O){return b.enter("lineEnding"),b.consume(O),b.exit("lineEnding"),y}function y(O){return b.enter("codeFencedFence"),R(O)?W(b,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):S(O)}function S(O){return O===o?(b.enter("codeFencedFenceSequence"),P(O)):v(O)}function P(O){return O===o?(z++,b.consume(O),P):z>=a?(b.exit("codeFencedFenceSequence"),R(O)?W(b,V,"whitespace")(O):V(O)):v(O)}function V(O){return O===null||N(O)?(b.exit("codeFencedFence"),_(O)):v(O)}}}function li(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const We={name:"codeIndented",tokenize:ci},ui={tokenize:hi,partial:!0};function ci(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),W(e,s,"linePrefix",5)(l)}function s(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(l):n(l)}function a(l){return l===null?p(l):N(l)?e.attempt(ui,a,p)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||N(l)?(e.exit("codeFlowValue"),a(l)):(e.consume(l),o)}function p(l){return e.exit("codeIndented"),t(l)}}function hi(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):N(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):W(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):N(a)?i(a):n(a)}}const di={name:"codeText",tokenize:pi,resolve:fi,previous:mi};function fi(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function mi(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function pi(e,t,n){let r=0,i,s;return a;function a(f){return e.enter("codeText"),e.enter("codeTextSequence"),o(f)}function o(f){return f===96?(e.consume(f),r++,o):(e.exit("codeTextSequence"),p(f))}function p(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),p):f===96?(s=e.enter("codeTextSequence"),i=0,u(f)):N(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),p):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||N(f)?(e.exit("codeTextData"),p(f)):(e.consume(f),l)}function u(f){return f===96?(e.consume(f),i++,u):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class gi{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Fe(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Fe(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Fe(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Fe(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Fe(this.left,n.reverse())}}}function Fe(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function cn(e){const t={};let n=-1,r,i,s,a,o,p,l;const u=new gi(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(p=r[1]._tokenizer.events,s=0,s<p.length&&p[s][1].type==="lineEndingBlank"&&(s+=2),s<p.length&&p[s][1].type==="content"))for(;++s<p.length&&p[s][1].type!=="content";)p[s][1].type==="chunkText"&&(p[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,xi(u,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(a=u.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},u.get(i)[1].start),o=u.slice(i,n),o.unshift(r),u.splice(i,n-i+1,o))}}return we(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function xi(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],a=n._tokenizer||r.parser[n.contentType](n.start),o=a.events,p=[],l={};let u,f,g=-1,m=n,I=0,F=0;const B=[F];for(;m;){for(;e.get(++i)[1]!==m;);s.push(i),m._tokenizer||(u=r.sliceStream(m),m.next||u.push(null),f&&a.defineSkip(m.start),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++g<o.length;)o[g][0]==="exit"&&o[g-1][0]==="enter"&&o[g][1].type===o[g-1][1].type&&o[g][1].start.line!==o[g][1].end.line&&(F=g+1,B.push(F),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(a.events=[],m?(m._tokenizer=void 0,m.previous=void 0):B.pop(),g=B.length;g--;){const k=o.slice(B[g],B[g+1]),$=s.pop();p.push([$,$+k.length-1]),e.splice($,2,k)}for(p.reverse(),g=-1;++g<p.length;)l[I+p[g][0]]=I+p[g][1],I+=p[g][1]-p[g][0]-1;return l}const bi={tokenize:yi,resolve:wi},ki={tokenize:Si,partial:!0};function wi(e){return cn(e),e}function yi(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):N(o)?e.check(ki,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Si(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),W(e,s,"linePrefix")}function s(a){if(a===null||N(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function hn(e,t,n,r,i,s,a,o,p){const l=p||Number.POSITIVE_INFINITY;let u=0;return f;function f(k){return k===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(k),e.exit(s),g):k===null||k===32||k===41||tt(k)?n(k):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),F(k))}function g(k){return k===62?(e.enter(s),e.consume(k),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),m(k))}function m(k){return k===62?(e.exit("chunkString"),e.exit(o),g(k)):k===null||k===60||N(k)?n(k):(e.consume(k),k===92?I:m)}function I(k){return k===60||k===62||k===92?(e.consume(k),m):m(k)}function F(k){return!u&&(k===null||k===41||ne(k))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(k)):u<l&&k===40?(e.consume(k),u++,F):k===41?(e.consume(k),u--,F):k===null||k===32||k===40||tt(k)?n(k):(e.consume(k),k===92?B:F)}function B(k){return k===40||k===41||k===92?(e.consume(k),F):F(k)}}function dn(e,t,n,r,i,s){const a=this;let o=0,p;return l;function l(m){return e.enter(r),e.enter(i),e.consume(m),e.exit(i),e.enter(s),u}function u(m){return o>999||m===null||m===91||m===93&&!p||m===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(m):m===93?(e.exit(s),e.enter(i),e.consume(m),e.exit(i),e.exit(r),t):N(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||N(m)||o++>999?(e.exit("chunkString"),u(m)):(e.consume(m),p||(p=!R(m)),m===92?g:f)}function g(m){return m===91||m===92||m===93?(e.consume(m),o++,f):f(m)}}function fn(e,t,n,r,i,s){let a;return o;function o(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),a=g===40?41:g,p):n(g)}function p(g){return g===a?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(s),l(g))}function l(g){return g===a?(e.exit(s),p(a)):g===null?n(g):N(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),W(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(g))}function u(g){return g===a||g===null||N(g)?(e.exit("chunkString"),l(g)):(e.consume(g),g===92?f:u)}function f(g){return g===a||g===92?(e.consume(g),u):u(g)}}function Pe(e,t){let n;return r;function r(i){return N(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):R(i)?W(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const ji={name:"definition",tokenize:Ci},zi={tokenize:Ii,partial:!0};function Ci(e,t,n){const r=this;let i;return s;function s(m){return e.enter("definition"),a(m)}function a(m){return dn.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function o(m){return i=Le(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),p):n(m)}function p(m){return ne(m)?Pe(e,l)(m):l(m)}function l(m){return hn(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function u(m){return e.attempt(zi,f,f)(m)}function f(m){return R(m)?W(e,g,"whitespace")(m):g(m)}function g(m){return m===null||N(m)?(e.exit("definition"),r.parser.defined.push(i),t(m)):n(m)}}function Ii(e,t,n){return r;function r(o){return ne(o)?Pe(e,i)(o):n(o)}function i(o){return fn(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return R(o)?W(e,a,"whitespace")(o):a(o)}function a(o){return o===null||N(o)?t(o):n(o)}}const Ei={name:"hardBreakEscape",tokenize:Ni};function Ni(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return N(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const vi={name:"headingAtx",tokenize:Li,resolve:Ti};function Ti(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},we(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Li(e,t,n){let r=0;return i;function i(u){return e.enter("atxHeading"),s(u)}function s(u){return e.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&r++<6?(e.consume(u),a):u===null||ne(u)?(e.exit("atxHeadingSequence"),o(u)):n(u)}function o(u){return u===35?(e.enter("atxHeadingSequence"),p(u)):u===null||N(u)?(e.exit("atxHeading"),t(u)):R(u)?W(e,o,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function p(u){return u===35?(e.consume(u),p):(e.exit("atxHeadingSequence"),o(u))}function l(u){return u===null||u===35||ne(u)?(e.exit("atxHeadingText"),o(u)):(e.consume(u),l)}}const Ai=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],zt=["pre","script","style","textarea"],Mi={name:"htmlFlow",tokenize:Oi,resolveTo:_i,concrete:!0},Fi={tokenize:Bi,partial:!0},Pi={tokenize:Di,partial:!0};function _i(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Oi(e,t,n){const r=this;let i,s,a,o,p;return l;function l(h){return u(h)}function u(h){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(h),f}function f(h){return h===33?(e.consume(h),g):h===47?(e.consume(h),s=!0,F):h===63?(e.consume(h),i=3,r.interrupt?t:c):pe(h)?(e.consume(h),a=String.fromCharCode(h),B):n(h)}function g(h){return h===45?(e.consume(h),i=2,m):h===91?(e.consume(h),i=5,o=0,I):pe(h)?(e.consume(h),i=4,r.interrupt?t:c):n(h)}function m(h){return h===45?(e.consume(h),r.interrupt?t:c):n(h)}function I(h){const ee="CDATA[";return h===ee.charCodeAt(o++)?(e.consume(h),o===ee.length?r.interrupt?t:S:I):n(h)}function F(h){return pe(h)?(e.consume(h),a=String.fromCharCode(h),B):n(h)}function B(h){if(h===null||h===47||h===62||ne(h)){const ee=h===47,ce=a.toLowerCase();return!ee&&!s&&zt.includes(ce)?(i=1,r.interrupt?t(h):S(h)):Ai.includes(a.toLowerCase())?(i=6,ee?(e.consume(h),k):r.interrupt?t(h):S(h)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(h):s?$(h):j(h))}return h===45||de(h)?(e.consume(h),a+=String.fromCharCode(h),B):n(h)}function k(h){return h===62?(e.consume(h),r.interrupt?t:S):n(h)}function $(h){return R(h)?(e.consume(h),$):L(h)}function j(h){return h===47?(e.consume(h),L):h===58||h===95||pe(h)?(e.consume(h),M):R(h)?(e.consume(h),j):L(h)}function M(h){return h===45||h===46||h===58||h===95||de(h)?(e.consume(h),M):H(h)}function H(h){return h===61?(e.consume(h),b):R(h)?(e.consume(h),H):j(h)}function b(h){return h===null||h===60||h===61||h===62||h===96?n(h):h===34||h===39?(e.consume(h),p=h,_):R(h)?(e.consume(h),b):v(h)}function _(h){return h===p?(e.consume(h),p=null,z):h===null||N(h)?n(h):(e.consume(h),_)}function v(h){return h===null||h===34||h===39||h===47||h===60||h===61||h===62||h===96||ne(h)?H(h):(e.consume(h),v)}function z(h){return h===47||h===62||R(h)?j(h):n(h)}function L(h){return h===62?(e.consume(h),y):n(h)}function y(h){return h===null||N(h)?S(h):R(h)?(e.consume(h),y):n(h)}function S(h){return h===45&&i===2?(e.consume(h),Z):h===60&&i===1?(e.consume(h),Y):h===62&&i===4?(e.consume(h),J):h===63&&i===3?(e.consume(h),c):h===93&&i===5?(e.consume(h),ie):N(h)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Fi,K,P)(h)):h===null||N(h)?(e.exit("htmlFlowData"),P(h)):(e.consume(h),S)}function P(h){return e.check(Pi,V,K)(h)}function V(h){return e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),O}function O(h){return h===null||N(h)?P(h):(e.enter("htmlFlowData"),S(h))}function Z(h){return h===45?(e.consume(h),c):S(h)}function Y(h){return h===47?(e.consume(h),a="",X):S(h)}function X(h){if(h===62){const ee=a.toLowerCase();return zt.includes(ee)?(e.consume(h),J):S(h)}return pe(h)&&a.length<8?(e.consume(h),a+=String.fromCharCode(h),X):S(h)}function ie(h){return h===93?(e.consume(h),c):S(h)}function c(h){return h===62?(e.consume(h),J):h===45&&i===2?(e.consume(h),c):S(h)}function J(h){return h===null||N(h)?(e.exit("htmlFlowData"),K(h)):(e.consume(h),J)}function K(h){return e.exit("htmlFlow"),t(h)}}function Di(e,t,n){const r=this;return i;function i(a){return N(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function Bi(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt($e,t,n)}}const Ri={name:"htmlText",tokenize:Hi};function Hi(e,t,n){const r=this;let i,s,a;return o;function o(c){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(c),p}function p(c){return c===33?(e.consume(c),l):c===47?(e.consume(c),H):c===63?(e.consume(c),j):pe(c)?(e.consume(c),v):n(c)}function l(c){return c===45?(e.consume(c),u):c===91?(e.consume(c),s=0,I):pe(c)?(e.consume(c),$):n(c)}function u(c){return c===45?(e.consume(c),m):n(c)}function f(c){return c===null?n(c):c===45?(e.consume(c),g):N(c)?(a=f,Y(c)):(e.consume(c),f)}function g(c){return c===45?(e.consume(c),m):f(c)}function m(c){return c===62?Z(c):c===45?g(c):f(c)}function I(c){const J="CDATA[";return c===J.charCodeAt(s++)?(e.consume(c),s===J.length?F:I):n(c)}function F(c){return c===null?n(c):c===93?(e.consume(c),B):N(c)?(a=F,Y(c)):(e.consume(c),F)}function B(c){return c===93?(e.consume(c),k):F(c)}function k(c){return c===62?Z(c):c===93?(e.consume(c),k):F(c)}function $(c){return c===null||c===62?Z(c):N(c)?(a=$,Y(c)):(e.consume(c),$)}function j(c){return c===null?n(c):c===63?(e.consume(c),M):N(c)?(a=j,Y(c)):(e.consume(c),j)}function M(c){return c===62?Z(c):j(c)}function H(c){return pe(c)?(e.consume(c),b):n(c)}function b(c){return c===45||de(c)?(e.consume(c),b):_(c)}function _(c){return N(c)?(a=_,Y(c)):R(c)?(e.consume(c),_):Z(c)}function v(c){return c===45||de(c)?(e.consume(c),v):c===47||c===62||ne(c)?z(c):n(c)}function z(c){return c===47?(e.consume(c),Z):c===58||c===95||pe(c)?(e.consume(c),L):N(c)?(a=z,Y(c)):R(c)?(e.consume(c),z):Z(c)}function L(c){return c===45||c===46||c===58||c===95||de(c)?(e.consume(c),L):y(c)}function y(c){return c===61?(e.consume(c),S):N(c)?(a=y,Y(c)):R(c)?(e.consume(c),y):z(c)}function S(c){return c===null||c===60||c===61||c===62||c===96?n(c):c===34||c===39?(e.consume(c),i=c,P):N(c)?(a=S,Y(c)):R(c)?(e.consume(c),S):(e.consume(c),V)}function P(c){return c===i?(e.consume(c),i=void 0,O):c===null?n(c):N(c)?(a=P,Y(c)):(e.consume(c),P)}function V(c){return c===null||c===34||c===39||c===60||c===61||c===96?n(c):c===47||c===62||ne(c)?z(c):(e.consume(c),V)}function O(c){return c===47||c===62||ne(c)?z(c):n(c)}function Z(c){return c===62?(e.consume(c),e.exit("htmlTextData"),e.exit("htmlText"),t):n(c)}function Y(c){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),X}function X(c){return R(c)?W(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):ie(c)}function ie(c){return e.enter("htmlTextData"),a(c)}}const ht={name:"labelEnd",tokenize:Qi,resolveTo:Wi,resolveAll:Ui},Vi={tokenize:Zi},$i={tokenize:Yi},qi={tokenize:Gi};function Ui(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Wi(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const p={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[a][1].end)},u={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[a-2][1].start)};return o=[["enter",p,t],["enter",l,t]],o=ue(o,e.slice(s+1,s+r+3)),o=ue(o,[["enter",u,t]]),o=ue(o,ct(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=ue(o,[["exit",u,t],e[a-2],e[a-1],["exit",l,t]]),o=ue(o,e.slice(a+1)),o=ue(o,[["exit",p,t]]),we(e,s,e.length,o),e}function Qi(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(g){return s?s._inactive?f(g):(a=r.parser.defined.includes(Le(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),p):n(g)}function p(g){return g===40?e.attempt(Vi,u,a?u:f)(g):g===91?e.attempt($i,u,a?l:f)(g):a?u(g):f(g)}function l(g){return e.attempt(qi,u,f)(g)}function u(g){return t(g)}function f(g){return s._balanced=!0,n(g)}}function Zi(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return ne(f)?Pe(e,s)(f):s(f)}function s(f){return f===41?u(f):hn(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return ne(f)?Pe(e,p)(f):u(f)}function o(f){return n(f)}function p(f){return f===34||f===39||f===40?fn(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function l(f){return ne(f)?Pe(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Yi(e,t,n){const r=this;return i;function i(o){return dn.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Le(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function Gi(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Ji={name:"labelStartImage",tokenize:Ki,resolveAll:ht.resolveAll};function Ki(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Xi={name:"labelStartLink",tokenize:es,resolveAll:ht.resolveAll};function es(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Qe={name:"lineEnding",tokenize:ts};function ts(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),W(e,t,"linePrefix")}}const Re={name:"thematicBreak",tokenize:ns};function ns(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),a(l)}function a(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),p(l)):r>=3&&(l===null||N(l))?(e.exit("thematicBreak"),t(l)):n(l)}function p(l){return l===i?(e.consume(l),r++,p):(e.exit("thematicBreakSequence"),R(l)?W(e,o,"whitespace")(l):o(l))}}const te={name:"list",tokenize:ss,continuation:{tokenize:as},exit:ls},rs={tokenize:us,partial:!0},is={tokenize:os,partial:!0};function ss(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(m){const I=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(I==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:nt(m)){if(r.containerState.type||(r.containerState.type=I,e.enter(I,{_container:!0})),I==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(Re,n,l)(m):l(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(m)}return n(m)}function p(m){return nt(m)&&++a<10?(e.consume(m),p):(!r.interrupt||a<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),l(m)):n(m)}function l(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check($e,r.interrupt?n:u,e.attempt(rs,g,f))}function u(m){return r.containerState.initialBlankLine=!0,s++,g(m)}function f(m){return R(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),g):n(m)}function g(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function as(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check($e,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,W(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!R(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(is,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,W(e,e.attempt(te,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function os(e,t,n){const r=this;return W(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function ls(e){e.exit(this.containerState.type)}function us(e,t,n){const r=this;return W(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!R(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Ct={name:"setextUnderline",tokenize:hs,resolveTo:cs};function cs(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=a,e.push(["exit",a,t]),e}function hs(e,t,n){const r=this;let i;return s;function s(l){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,a(l)):n(l)}function a(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),R(l)?W(e,p,"lineSuffix")(l):p(l))}function p(l){return l===null||N(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const ds={tokenize:fs};function fs(e){const t=this,n=e.attempt($e,r,e.attempt(this.parser.constructs.flowInitial,i,W(e,e.attempt(this.parser.constructs.flow,i,e.attempt(bi,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ms={resolveAll:pn()},ps=mn("string"),gs=mn("text");function mn(e){return{tokenize:t,resolveAll:pn(e==="text"?xs:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(u){return l(u)?s(u):o(u)}function o(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),p}function p(u){return l(u)?(n.exit("data"),s(u)):(n.consume(u),p)}function l(u){if(u===null)return!0;const f=i[u];let g=-1;if(f)for(;++g<f.length;){const m=f[g];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function pn(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function xs(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,p;for(;s--;){const l=i[s];if(typeof l=="string"){for(a=l.length;l.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(l===-2)p=!0,o++;else if(l!==-1){s++;break}}if(o){const l={type:n===e.length||p||o<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+s,_bufferIndex:s?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function bs(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let a=[],o=[];const p={consume:$,enter:j,exit:M,attempt:_(H),check:_(b),interrupt:_(b,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:m,sliceSerialize:g,now:I,defineSkip:F,write:f};let u=t.tokenize.call(l,p);return t.resolveAll&&s.push(t),l;function f(y){return a=ue(a,y),B(),a[a.length-1]!==null?[]:(v(t,0),l.events=ct(s,l.events,l),l.events)}function g(y,S){return ws(m(y),S)}function m(y){return ks(a,y)}function I(){const{line:y,column:S,offset:P,_index:V,_bufferIndex:O}=r;return{line:y,column:S,offset:P,_index:V,_bufferIndex:O}}function F(y){i[y.line]=y.column,L()}function B(){let y;for(;r._index<a.length;){const S=a[r._index];if(typeof S=="string")for(y=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===y&&r._bufferIndex<S.length;)k(S.charCodeAt(r._bufferIndex));else k(S)}}function k(y){u=u(y)}function $(y){N(y)?(r.line++,r.column=1,r.offset+=y===-3?2:1,L()):y!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=y}function j(y,S){const P=S||{};return P.type=y,P.start=I(),l.events.push(["enter",P,l]),o.push(P),P}function M(y){const S=o.pop();return S.end=I(),l.events.push(["exit",S,l]),S}function H(y,S){v(y,S.from)}function b(y,S){S.restore()}function _(y,S){return P;function P(V,O,Z){let Y,X,ie,c;return Array.isArray(V)?K(V):"tokenize"in V?K([V]):J(V);function J(G){return ge;function ge(ae){const oe=ae!==null&&G[ae],fe=ae!==null&&G.null,Ne=[...Array.isArray(oe)?oe:oe?[oe]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return K(Ne)(ae)}}function K(G){return Y=G,X=0,G.length===0?Z:h(G[X])}function h(G){return ge;function ge(ae){return c=z(),ie=G,G.partial||(l.currentConstruct=G),G.name&&l.parser.constructs.disable.null.includes(G.name)?ce():G.tokenize.call(S?Object.assign(Object.create(l),S):l,p,ee,ce)(ae)}}function ee(G){return y(ie,c),O}function ce(G){return c.restore(),++X<Y.length?h(Y[X]):Z}}}function v(y,S){y.resolveAll&&!s.includes(y)&&s.push(y),y.resolve&&we(l.events,S,l.events.length-S,y.resolve(l.events.slice(S),l)),y.resolveTo&&(l.events=y.resolveTo(l.events,l))}function z(){const y=I(),S=l.previous,P=l.currentConstruct,V=l.events.length,O=Array.from(o);return{restore:Z,from:V};function Z(){r=y,l.previous=S,l.currentConstruct=P,l.events.length=V,o=O,L()}}function L(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function ks(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function ws(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}const ys={42:te,43:te,45:te,48:te,49:te,50:te,51:te,52:te,53:te,54:te,55:te,56:te,57:te,62:on},Ss={91:ji},js={[-2]:We,[-1]:We,32:We},zs={35:vi,42:Re,45:[Ct,Re],60:Mi,61:Ct,95:Re,96:jt,126:jt},Cs={38:un,92:ln},Is={[-5]:Qe,[-4]:Qe,[-3]:Qe,33:Ji,38:un,42:rt,60:[Xr,Ri],91:Xi,92:[Ei,ln],93:ht,95:rt,96:di},Es={null:[rt,ms]},Ns={null:[42,95]},vs={null:[]},Ts=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ns,contentInitial:Ss,disable:vs,document:ys,flow:zs,flowInitial:js,insideSpan:Es,string:Cs,text:Is},Symbol.toStringTag,{value:"Module"}));function Ls(e){const n=Dr([Ts,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Wr),document:i(Zr),flow:i(ds),string:i(ps),text:i(gs)};return r;function i(s){return a;function a(o){return bs(r,s,o)}}}function As(e){for(;!cn(e););return e}const It=/[\0\t\n\r]/g;function Ms(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const p=[];let l,u,f,g,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(It.lastIndex=f,l=It.exec(s),g=l&&l.index!==void 0?l.index:s.length,m=s.charCodeAt(g),!l){t=s.slice(f);break}if(m===10&&f===g&&r)p.push(-3),r=void 0;else switch(r&&(p.push(-5),r=void 0),f<g&&(p.push(s.slice(f,g)),e+=g-f),m){case 0:{p.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,p.push(-2);e++<u;)p.push(-1);break}case 10:{p.push(-4),e=1;break}default:r=!0,e=1}f=g+1}return o&&(r&&p.push(-5),t&&p.push(t),p.push(null)),p}}const Fs=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ps(e){return e.replace(Fs,_s)}function _s(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return an(n.slice(s?2:1),s?16:10)}return ut(n)||e}function _e(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Et(e.position):"start"in e||"end"in e?Et(e):"line"in e||"column"in e?it(e):""}function it(e){return Nt(e&&e.line)+":"+Nt(e&&e.column)}function Et(e){return it(e&&e.start)+"-"+it(e&&e.end)}function Nt(e){return e&&typeof e=="number"?e:1}const gn={}.hasOwnProperty;function Os(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ds(n)(As(Ls(n).document().write(Ms()(e,t,!0))))}function Ds(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ft),autolinkProtocol:z,autolinkEmail:z,atxHeading:s(A),blockQuote:s(oe),characterEscape:z,characterReference:z,codeFenced:s(fe),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(fe,a),codeText:s(Ne,a),codeTextData:z,data:z,codeFlowValue:z,definition:s(qe),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(E),hardBreakEscape:s(q),hardBreakTrailing:s(q),htmlFlow:s(Q,a),htmlFlowData:z,htmlText:s(Q,a),htmlTextData:z,image:s(Ue),label:a,link:s(ft),listItem:s(yn),listItemValue:g,listOrdered:s(mt,f),listUnordered:s(mt),paragraph:s(Sn),reference:h,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(A),strong:s(jn),thematicBreak:s(Cn)},exit:{atxHeading:p(),atxHeadingSequence:H,autolink:p(),autolinkEmail:ae,autolinkProtocol:ge,blockQuote:p(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:G,codeFenced:p(B),codeFencedFence:F,codeFencedFenceInfo:m,codeFencedFenceMeta:I,codeFlowValue:L,codeIndented:p(k),codeText:p(O),codeTextData:L,data:L,definition:p(),definitionDestinationString:M,definitionLabelString:$,definitionTitleString:j,emphasis:p(),hardBreakEscape:p(S),hardBreakTrailing:p(S),htmlFlow:p(P),htmlFlowData:L,htmlText:p(V),htmlTextData:L,image:p(Y),label:ie,labelText:X,lineEnding:y,link:p(Z),listItem:p(),listOrdered:p(),listUnordered:p(),paragraph:p(),referenceString:ee,resourceDestinationString:c,resourceTitleString:J,resource:K,setextHeading:p(v),setextHeadingLineSequence:_,setextHeadingText:b,strong:p(),thematicBreak:p()}};xn(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(x){let w={type:"root",children:[]};const T={stack:[w],tokenStack:[],config:t,enter:o,exit:l,buffer:a,resume:u,data:n},D=[];let U=-1;for(;++U<x.length;)if(x[U][1].type==="listOrdered"||x[U][1].type==="listUnordered")if(x[U][0]==="enter")D.push(U);else{const he=D.pop();U=i(x,he,U)}for(U=-1;++U<x.length;){const he=t[x[U][0]];gn.call(he,x[U][1].type)&&he[x[U][1].type].call(Object.assign({sliceSerialize:x[U][2].sliceSerialize},T),x[U][1])}if(T.tokenStack.length>0){const he=T.tokenStack[T.tokenStack.length-1];(he[1]||vt).call(T,void 0,he[0])}for(w.position={start:ye(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:ye(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},U=-1;++U<t.transforms.length;)w=t.transforms[U](w)||w;return w}function i(x,w,T){let D=w-1,U=-1,he=!1,ze,xe,Ae,Me;for(;++D<=T;){const se=x[D];switch(se[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{se[0]==="enter"?U++:U--,Me=void 0;break}case"lineEndingBlank":{se[0]==="enter"&&(ze&&!Me&&!U&&!Ae&&(Ae=D),Me=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Me=void 0}if(!U&&se[0]==="enter"&&se[1].type==="listItemPrefix"||U===-1&&se[0]==="exit"&&(se[1].type==="listUnordered"||se[1].type==="listOrdered")){if(ze){let ve=D;for(xe=void 0;ve--;){const be=x[ve];if(be[1].type==="lineEnding"||be[1].type==="lineEndingBlank"){if(be[0]==="exit")continue;xe&&(x[xe][1].type="lineEndingBlank",he=!0),be[1].type="lineEnding",xe=ve}else if(!(be[1].type==="linePrefix"||be[1].type==="blockQuotePrefix"||be[1].type==="blockQuotePrefixWhitespace"||be[1].type==="blockQuoteMarker"||be[1].type==="listItemIndent"))break}Ae&&(!xe||Ae<xe)&&(ze._spread=!0),ze.end=Object.assign({},xe?x[xe][1].start:se[1].end),x.splice(xe||D,0,["exit",ze,se[2]]),D++,T++}if(se[1].type==="listItemPrefix"){const ve={type:"listItem",_spread:!1,start:Object.assign({},se[1].start),end:void 0};ze=ve,x.splice(D,0,["enter",ve,se[2]]),D++,T++,Ae=void 0,Me=!0}}}return x[w][1]._spread=he,T}function s(x,w){return T;function T(D){o.call(this,x(D),D),w&&w.call(this,D)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(x,w,T){this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([w,T]),x.position={start:ye(w.start),end:void 0}}function p(x){return w;function w(T){x&&x.call(this,T),l.call(this,T)}}function l(x,w){const T=this.stack.pop(),D=this.tokenStack.pop();if(D)D[0].type!==x.type&&(w?w.call(this,x,D[0]):(D[1]||vt).call(this,x,D[0]));else throw new Error("Cannot close `"+x.type+"` ("+_e({start:x.start,end:x.end})+"): it’s not open");T.position.end=ye(x.end)}function u(){return _r(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function g(x){if(this.data.expectingFirstListItemValue){const w=this.stack[this.stack.length-2];w.start=Number.parseInt(this.sliceSerialize(x),10),this.data.expectingFirstListItemValue=void 0}}function m(){const x=this.resume(),w=this.stack[this.stack.length-1];w.lang=x}function I(){const x=this.resume(),w=this.stack[this.stack.length-1];w.meta=x}function F(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function B(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x.replace(/(\r?\n|\r)$/g,"")}function $(x){const w=this.resume(),T=this.stack[this.stack.length-1];T.label=w,T.identifier=Le(this.sliceSerialize(x)).toLowerCase()}function j(){const x=this.resume(),w=this.stack[this.stack.length-1];w.title=x}function M(){const x=this.resume(),w=this.stack[this.stack.length-1];w.url=x}function H(x){const w=this.stack[this.stack.length-1];if(!w.depth){const T=this.sliceSerialize(x).length;w.depth=T}}function b(){this.data.setextHeadingSlurpLineEnding=!0}function _(x){const w=this.stack[this.stack.length-1];w.depth=this.sliceSerialize(x).codePointAt(0)===61?1:2}function v(){this.data.setextHeadingSlurpLineEnding=void 0}function z(x){const T=this.stack[this.stack.length-1].children;let D=T[T.length-1];(!D||D.type!=="text")&&(D=zn(),D.position={start:ye(x.start),end:void 0},T.push(D)),this.stack.push(D)}function L(x){const w=this.stack.pop();w.value+=this.sliceSerialize(x),w.position.end=ye(x.end)}function y(x){const w=this.stack[this.stack.length-1];if(this.data.atHardBreak){const T=w.children[w.children.length-1];T.position.end=ye(x.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(w.type)&&(z.call(this,x),L.call(this,x))}function S(){this.data.atHardBreak=!0}function P(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x}function V(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x}function O(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x}function Z(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const w=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=w,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function Y(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const w=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=w,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function X(x){const w=this.sliceSerialize(x),T=this.stack[this.stack.length-2];T.label=Ps(w),T.identifier=Le(w).toLowerCase()}function ie(){const x=this.stack[this.stack.length-1],w=this.resume(),T=this.stack[this.stack.length-1];if(this.data.inReference=!0,T.type==="link"){const D=x.children;T.children=D}else T.alt=w}function c(){const x=this.resume(),w=this.stack[this.stack.length-1];w.url=x}function J(){const x=this.resume(),w=this.stack[this.stack.length-1];w.title=x}function K(){this.data.inReference=void 0}function h(){this.data.referenceType="collapsed"}function ee(x){const w=this.resume(),T=this.stack[this.stack.length-1];T.label=w,T.identifier=Le(this.sliceSerialize(x)).toLowerCase(),this.data.referenceType="full"}function ce(x){this.data.characterReferenceType=x.type}function G(x){const w=this.sliceSerialize(x),T=this.data.characterReferenceType;let D;T?(D=an(w,T==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):D=ut(w);const U=this.stack.pop();U.value+=D,U.position.end=ye(x.end)}function ge(x){L.call(this,x);const w=this.stack[this.stack.length-1];w.url=this.sliceSerialize(x)}function ae(x){L.call(this,x);const w=this.stack[this.stack.length-1];w.url="mailto:"+this.sliceSerialize(x)}function oe(){return{type:"blockquote",children:[]}}function fe(){return{type:"code",lang:null,meta:null,value:""}}function Ne(){return{type:"inlineCode",value:""}}function qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function E(){return{type:"emphasis",children:[]}}function A(){return{type:"heading",depth:0,children:[]}}function q(){return{type:"break"}}function Q(){return{type:"html",value:""}}function Ue(){return{type:"image",title:null,url:"",alt:null}}function ft(){return{type:"link",title:null,url:"",children:[]}}function mt(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function yn(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function Sn(){return{type:"paragraph",children:[]}}function jn(){return{type:"strong",children:[]}}function zn(){return{type:"text",value:""}}function Cn(){return{type:"thematicBreak"}}}function ye(e){return{line:e.line,column:e.column,offset:e.offset}}function xn(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?xn(e,r):Bs(e,r)}}function Bs(e,t){let n;for(n in t)if(gn.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function vt(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+_e({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+_e({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+_e({start:t.start,end:t.end})+") is still open")}function Rs(e){const t=this;t.parser=n;function n(r){return Os(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Tt(e){if(e)throw e}var He=Object.prototype.hasOwnProperty,bn=Object.prototype.toString,Lt=Object.defineProperty,At=Object.getOwnPropertyDescriptor,Mt=function(t){return typeof Array.isArray=="function"?Array.isArray(t):bn.call(t)==="[object Array]"},Ft=function(t){if(!t||bn.call(t)!=="[object Object]")return!1;var n=He.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&He.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||He.call(t,i)},Pt=function(t,n){Lt&&n.name==="__proto__"?Lt(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},_t=function(t,n){if(n==="__proto__")if(He.call(t,n)){if(At)return At(t,n).value}else return;return t[n]},Hs=function e(){var t,n,r,i,s,a,o=arguments[0],p=1,l=arguments.length,u=!1;for(typeof o=="boolean"&&(u=o,o=arguments[1]||{},p=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});p<l;++p)if(t=arguments[p],t!=null)for(n in t)r=_t(o,n),i=_t(t,n),o!==i&&(u&&i&&(Ft(i)||(s=Mt(i)))?(s?(s=!1,a=r&&Mt(r)?r:[]):a=r&&Ft(r)?r:{},Pt(o,{name:n,newValue:e(u,a,i)})):typeof i<"u"&&Pt(o,{name:n,newValue:i}));return o};const Ze=In(Hs);function st(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Vs(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(p,...l){const u=e[++s];let f=-1;if(p){a(p);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,u?$s(u,o)(...l):a(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function $s(e,t){let n;return r;function r(...a){const o=e.length>a.length;let p;o&&a.push(i);try{p=e.apply(this,a)}catch(l){const u=l;if(o&&n)throw u;return i(u)}o||(p&&p.then&&typeof p.then=="function"?p.then(s,i):p instanceof Error?i(p):s(p))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}class re extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const p=r.indexOf(":");p===-1?s.ruleId=r:(s.source=r.slice(0,p),s.ruleId=r.slice(p+1))}if(!s.place&&s.ancestors&&s.ancestors){const p=s.ancestors[s.ancestors.length-1];p&&(s.place=p.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=o?o.line:void 0,this.name=_e(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}re.prototype.file="";re.prototype.name="";re.prototype.reason="";re.prototype.message="";re.prototype.stack="";re.prototype.column=void 0;re.prototype.line=void 0;re.prototype.ancestors=void 0;re.prototype.cause=void 0;re.prototype.fatal=void 0;re.prototype.place=void 0;re.prototype.ruleId=void 0;re.prototype.source=void 0;const me={basename:qs,dirname:Us,extname:Ws,join:Qs,sep:"/"};function qs(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');De(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function Us(e){if(De(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Ws(e){De(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Qs(...e){let t=-1,n;for(;++t<e.length;)De(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Zs(n)}function Zs(e){De(e);const t=e.codePointAt(0)===47;let n=Ys(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Ys(e,t){let n="",r=0,i=-1,s=0,a=-1,o,p;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(p=n.lastIndexOf("/"),p!==n.length-1){p<0?(n="",r=0):(n=n.slice(0,p),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function De(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Gs={cwd:Js};function Js(){return"/"}function at(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Ks(e){if(typeof e=="string")e=new URL(e);else if(!at(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Xs(e)}function Xs(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Ye=["history","path","basename","stem","extname","dirname"];class ea{constructor(t){let n;t?at(t)?n={path:t}:typeof t=="string"||ta(t)?n={value:t}:n=t:n={},this.cwd=Gs.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ye.length;){const s=Ye[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Ye.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?me.basename(this.path):void 0}set basename(t){Je(t,"basename"),Ge(t,"basename"),this.path=me.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?me.dirname(this.path):void 0}set dirname(t){Ot(this.basename,"dirname"),this.path=me.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?me.extname(this.path):void 0}set extname(t){if(Ge(t,"extname"),Ot(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=me.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){at(t)&&(t=Ks(t)),Je(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?me.basename(this.path,this.extname):void 0}set stem(t){Je(t,"stem"),Ge(t,"stem"),this.path=me.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new re(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ge(e,t){if(e&&e.includes(me.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+me.sep+"`")}function Je(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ot(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ta(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const na=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const a=Object.getOwnPropertyNames(i);for(const o of a){const p=Object.getOwnPropertyDescriptor(i,o);p&&Object.defineProperty(s,o,p)}return s},ra={}.hasOwnProperty;class dt extends na{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Vs()}copy(){const t=new dt;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Ze(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(et("data",this.frozen),this.namespace[t]=n,this):ra.call(this.namespace,t)&&this.namespace[t]||void 0:t?(et("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Be(t),r=this.parser||this.Parser;return Ke("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Ke("process",this.parser||this.Parser),Xe("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=Be(t),p=r.parse(o);r.run(p,o,function(u,f,g){if(u||!f||!g)return l(u);const m=f,I=r.stringify(m,g);aa(I)?g.value=I:g.result=I,l(u,g)});function l(u,f){u||!f?a(u):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Ke("processSync",this.parser||this.Parser),Xe("processSync",this.compiler||this.Compiler),this.process(t,i),Bt("processSync","process",n),r;function i(s,a){n=!0,Tt(s),r=a}}run(t,n,r){Dt(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const p=Be(n);i.run(t,p,l);function l(u,f,g){const m=f||t;u?o(u):a?a(m):r(void 0,m,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Bt("runSync","run",r),i;function s(a,o){Tt(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=Be(n),i=this.compiler||this.Compiler;return Xe("stringify",i),Dt(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(et("use",this.frozen),t!=null)if(typeof t=="function")p(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")p(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[u,...f]=l;p(u,f)}else a(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function a(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=Ze(!0,i.settings,l.settings))}function o(l){let u=-1;if(l!=null)if(Array.isArray(l))for(;++u<l.length;){const f=l[u];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function p(l,u){let f=-1,g=-1;for(;++f<r.length;)if(r[f][0]===l){g=f;break}if(g===-1)r.push([l,...u]);else if(u.length>0){let[m,...I]=u;const F=r[g][1];st(F)&&st(m)&&(m=Ze(!0,F,m)),r[g]=[l,m,...I]}}}}const ia=new dt().freeze();function Ke(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Xe(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function et(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Dt(e){if(!st(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Bt(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Be(e){return sa(e)?e:new ea(e)}function sa(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function aa(e){return typeof e=="string"||oa(e)}function oa(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function la(e,t={}){const n={},r=e.slice(0,100),i=r.split(`
`).find(u=>u.trim().startsWith("name: ")),s=r.split(`
`).find(u=>u.trim().startsWith("emoji: "));let a=e.replace("```yaml\n","");if(i&&(n.name=i.replace(/\s*name: /,"")),s){n.emoji=s.replace(/\s*emoji: /,"");const u=e.indexOf("---",10);u>0&&(a=e.slice(Math.max(0,u+3)))}const o=ia().use(Rs).parse(a),p=o.children.filter(u=>u.type==="code"||u.type==="html");for(const u of o.children)if(u.type==="paragraph"){let f="";if(u.children[0].type==="html")for(const g of u.children)f=f+g.value||"";p.push({type:"code",lang:"html",value:f})}const l=o.children.filter(u=>u.type==="code"&&u.lang==="javascript");return n.html=[...p.map(u=>u.value),...l.map(u=>`<script type="text/javascript">${u.value}<\/script>`)].join(`
`),n}const ua="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ca=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=ua[n[e]&63];return t};function ha(e){let t=e.replaceAll("-gray-","-zinc-");return t=t.replaceAll("via.placeholder.com","placehold.co"),t=t.replaceAll("placehold.it","placehold.co"),t=t.replaceAll(/"[^"]*\.(mp3|wav)"|'[^']*\.(mp3|wav)'/g,`"${document.location.origin}/openui/funky.mp3"`),t=t.replaceAll(/<!--[\S\s]*?-->/g,""),t}function kn(e){try{const{childNodes:t}=e;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===Node.COMMENT_NODE?r.remove():r.nodeType===Node.ELEMENT_NODE&&kn(r)}}catch(t){console.error(t)}}function Rt(e){return console.log("New Chapter called",e),`

---
prompt: ${e}
---

`}function wn({isShared:e}){const t=Ht(),[n,r]=En(),i=Nn(),s=t.id??"new",[a,o]=le(cr),[p,l]=C.useState(a),[u,f]=le(Oe({id:s})),[g,m]=le(Zt),[I,F]=le(Yt),[B,k]=le(ot),[$,j]=le(Vt),M=tr(),H=Te(hr),b=Te(dr),_=Te(fr),v=C.useRef(null),z=C.useRef(null),L=(u.markdown??"").split(/---\nprompt:.+\n---/gm).pop(),[y,S]=C.useState(L??""),[P,V]=C.useState(u.html??""),[O,Z]=C.useState(),[Y,X]=C.useState([]),[ie,c]=C.useState(y!==""),[J,K]=C.useState(!1),[h,ee]=C.useState(y!==""),ce=ie?"refine":"create",G=pr(y),ge=gr(`(min-width: ${xr}px)`);C.useEffect(()=>{},[P,u]),C.useEffect(()=>{e&&(async()=>{const E=await nr(s);f(E),V(E.html??"")})().catch(E=>{console.error(E),setTimeout(()=>Z(E.toString()),1e3)})},[e,s,f]),C.useEffect(()=>{p.length!==a.length&&(M(),l(a))},[a,p.length,M]),C.useEffect(()=>{c((y||"").trim()!=="")},[y]),C.useEffect(()=>{if(t.id==="new"){Z(void 0),m(""),S(""),X([]),ee(!1);return}window._item=u,S((u.markdown??"").split(/---\nprompt:.+\n---/gm).pop()??"")},[t.id]);const ae=C.useCallback(E=>{E.trim()!==""&&(console.log("Saving:",E),f(A=>({...A,markdown:(A.markdown??"")+E})),M())},[M,f]),oe=C.useCallback((E,A,q=!1)=>{K(!0),S(""),m(""),Z(void 0),rr({query:E,model:H,action:ce,systemPrompt:_,html:q?void 0:A,image:q?void 0:B,temperature:b},Q=>{S(Ue=>(Ue||"")+Q)}).then(Q=>{k(""),K(!1),ae(Q),z.current&&(z.current.value="")}).catch(Q=>{K(!1),k(""),ae(""),console.error(Q),Z(Q.message)})},[H,ce,B,_,S,K,Z,k,m,ae,b]);C.useEffect(()=>{const E=n.get("gen")==="1",A=n.get("clear")==="true";E&&!u.markdown&&!J&&(r(new URLSearchParams,{preventScrollReset:!0,replace:!0}),oe(u.prompt,void 0,A))},[u,J,r,n,oe]),C.useEffect(()=>{try{if(!y||t.id==="new"){V("");return}Z(void 0);const E=la(y,{name:u.name,emoji:u.emoji});E.html?(f(A=>({...A,...E})),V(ha(E.html))):J||Z("No HTML in response.  View the response in the chat history.")}catch(E){f(A=>({...A,name:"Error"})),console.error(E)}},[G]),C.useEffect(()=>{const E=q=>{q.shiftKey&&c(!1)},A=q=>{q.key==="Shift"&&c(y!=="")};return document.addEventListener("keydown",E),document.addEventListener("keyup",A),()=>{document.removeEventListener("keydown",E),document.removeEventListener("keyup",A)}},[y]);const fe=C.useCallback((E,A=!0)=>{const q=ca();S(""),Oe({id:q,prompt:E,createdAt:new Date}),o(Q=>[q,...Q]),i(`/ai/${q}?gen=1&clear=${A}`)},[i,o]),Ne=async E=>{var q;E.preventDefault();const A=((q=z.current)==null?void 0:q.value.trim())??"";if(!(B===""&&A==="")){if(ce==="create"){fe(A,B==="");return}S(""),console.log("Submit",u.name),f(Q=>({...Q,markdown:Q.markdown+Rt(A),prompts:[...Q.prompts??[Q.prompt],A]})),oe(A,P)}};function qe(E){const A=E.querySelectorAll("script"),q=[];for(const Q of A)q.push({text:Q.innerHTML,src:Q.src,type:Q.type});return q}return C.useEffect(()=>{if(t.id==="new"){V("");return}const A=new DOMParser().parseFromString(P,"text/html");kn(A.body),f(q=>({...q,html:A.body.innerHTML})),X(qe(A))},[P,f,t.id,u.name]),C.useEffect(()=>{if(!$)return;const E=$;j(void 0),K(!0);const A=u.components??{};ir({model:H,framework:E,html:P,temperature:b},q=>{f(Q=>(A[E]===void 0&&(A[E]=""),A[E]+=q,{...Q,components:{...A}}))}).then(()=>{M(),K(!1)}).catch(q=>{K(!1),console.error(q)})},[$,f,M,j,u.components,H,P,b]),C.useEffect(()=>{g!==""&&(f(E=>({...E,markdown:E.markdown+Rt(I[0])})),F([]),oe("",g))},[g,I,F,f,oe]),d.jsxs("div",{className:"flex-col bg-secondary",children:[d.jsxs("div",{className:"p-2",children:[d.jsx(rn,{id:s,html:P,js:Y,error:O,imageUploadRef:v,isRendering:J}),d.jsx(jr,{id:s,code:P,isShared:e??!1}),a.length<=2&&d.jsx(Jt,{className:ke("absolute left-[calc(50%)] w-11/12 -translate-x-1/2",h&&"-bottom-10 opacity-0"),style:{bottom:ge?"130px":"230px"},callback:E=>{fe(E)}})]}),d.jsx(Se,{onClick:()=>{const E=!h;ee(E),z.current&&!E&&z.current.focus()},variant:"ghost",size:"icon",className:"absolute left-[calc(50%-1.25rem)] z-10 hover:scale-125 hover:animate-pulse hover:bg-transparent",style:{bottom:`${ge?10:100}px`},children:h?d.jsx(sr,{className:"inline-block h-5 w-5"}):d.jsx(ar,{className:"inline-block h-5 w-5"})}),d.jsxs(vn,{onSubmit:Ne,children:[d.jsx("input",{ref:v,id:"file-input",type:"file",className:"hidden",accept:"image/*",onChange:E=>{var Q;const A=((Q=E.target.files)==null?void 0:Q[0])??void 0;if(A===void 0)return;const q=new FileReader;q.addEventListener("load",()=>k(q.result)),q.readAsDataURL(A)}}),d.jsxs("div",{id:"llm-input",className:ke("absolute left-[calc(50%)] z-0 flex w-11/12 -translate-x-1/2 justify-center rounded-full bg-background px-8 py-4 align-middle transition-all duration-500 lg:max-w-full",h&&"translate-y-24 opacity-0"),style:{bottom:`${ge?45:145}px`},children:[d.jsx(or,{name:"query",rows:1,className:"min-h-[41px] min-w-0 flex-1 resize-none rounded-none border-none text-base focus-visible:ring-0 focus-visible:ring-offset-0",placeholder:ie?"Ask for changes to the current UI":B?"Describe the screenshot you uploaded (Optional)":"Describe a UI you desire",ref:z,onKeyDown:E=>{E.key==="Enter"&&Ne(E).catch(A=>console.error(A))}}),d.jsx("div",{className:"flex items-center",children:J?d.jsx("div",{className:"h-8 w-8 flex-none animate-spin rounded-full bg-gradient-to-r from-purple-500 via-pink-500 to-red-500"}):d.jsx(Se,{className:"h-8 w-8 flex-none rounded-full",variant:"outline",size:"icon",type:"submit",children:ie?d.jsx(lr,{className:"h-6 w-6"}):d.jsx(ur,{className:"h-6 w-6"})})})]})]})]})}wn.defaultProps={isShared:!1};const pa=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"}));export{pa as B,re as V,de as a,ea as b,Rs as r,ia as u};
